# ─── URLs de los servidores MCP ───────────────────────────────────────────────
MCP_RESERVA_URL=http://localhost:8003/mcp
MCP_CITA_URL=http://localhost:8002/mcp
MCP_VENTA_URL=http://localhost:8001/mcp

# Activar/desactivar agentes (true|false)
MCP_RESERVA_ENABLED=false
MCP_CITA_ENABLED=true
# Venta deshabilitado por defecto; activar cuando el agente esté desplegado
MCP_VENTA_ENABLED=true

# ─── OpenAI ───────────────────────────────────────────────────────────────────
OPENAI_API_KEY=sk-your-openai-api-key-here
# Modelo a usar: gpt-4o-mini (default, más económico) | gpt-4o (más capaz)
OPENAI_MODEL=gpt-4o-mini
# Timeout para esperar respuesta de OpenAI (segundos)
OPENAI_TIMEOUT=60

# ─── Timeouts y reintentos MCP ────────────────────────────────────────────────
# Tiempo máximo esperando respuesta de un agente especializado (segundos)
MCP_TIMEOUT=30
# Intentos ante fallo antes de rendirse
MCP_MAX_RETRIES=2

# ─── Circuit breaker MCP ──────────────────────────────────────────────────────
# Fallos consecutivos para abrir el circuit breaker
MCP_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
# Segundos antes de intentar recuperación (HALF_OPEN)
MCP_CIRCUIT_BREAKER_RESET_TIMEOUT=60

# ─── Contexto de negocio ──────────────────────────────────────────────────────
# Endpoint que devuelve el contexto breve del negocio para el orquestador
CONTEXTO_NEGOCIO_ENDPOINT=https://api.maravia.pe/servicio/ws_informacion_ia.php
# Timeout para la llamada al endpoint de contexto (segundos)
CONTEXTO_NEGOCIO_TIMEOUT=10

# ─── Timeout global del flujo chat ────────────────────────────────────────────
# Debe ser mayor que OPENAI_TIMEOUT + MCP_TIMEOUT para el caso normal
# Ejemplo: 60 (OpenAI) + 30 (MCP) + margen = 120
CHAT_TIMEOUT=120

# ─── CORS ─────────────────────────────────────────────────────────────────────
# Desarrollo: * (permite todos los orígenes)
# Producción: especificar dominios separados por coma
# CORS_ALLOWED_ORIGINS=https://app.maravia.pe,https://n8n.maravia.pe
CORS_ALLOWED_ORIGINS=*
